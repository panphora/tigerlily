function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function r(r,e){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=function(r,e){if(r){if("string"==typeof r)return t(r,void 0);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(r,void 0):void 0}}(r))||e&&r&&"number"==typeof r.length){n&&(r=n);var o=0;return function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=r[Symbol.iterator]()).next.bind(n)}var e,n,o={},a=function(t,e){for(var n,a=r(Array.isArray(t)?t:[t]);!(n=a()).done;){var i=n.value;o[i]||(o[i]=[]),o[i].push(e)}},i=Object.prototype,u=Function.prototype.toString,c=i.hasOwnProperty,l=u.call(Object),f=i.toString,y=(e=Object.getPrototypeOf,n=Object,function(t){return e(n(t))});export default(t,e={})=>{if("string"!=typeof t)throw new Error("tigerlily requires a database name");const{defaults:n={}}=e;let i=JSON.parse(localStorage.getItem(t)||"{}");i=Object.assign(n,i);let s=new Proxy(i,function e(n){return{get:(t,r)=>"object"==typeof t[r]&&null!==t[r]?new Proxy(t[r],e(n)):t[r],set(e,a,i){let s=e[a];if(e[a]=i,localStorage.setItem(t,JSON.stringify(n)),"on"!==a){let t=function(t,r){if(t===r)return"";let e="";return function t(r,e,n){n=n||"",Array.isArray(r)?function(r,e,n){r.forEach((r,o,a)=>{const i=`${n}[${o}]`;e.call(a,r,o,a,i),t(a[o],e,i)})}(r,e,n):function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||"[object Object]"!=f.call(t)||function(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(t){}return r}(t))return!1;var r=y(t);if(null===r)return!0;var e=c.call(r,"constructor")&&r.constructor;return"function"==typeof e&&e instanceof e&&u.call(e)==l}(r)&&function(r,e,n){for(const o in r){const a=n?`${n}.${o}`:o;e.call(r,r[o],o,r,a),t(r[o],e,a)}}(r,e,n)}(t,(t,n,o,a)=>{t===r&&(e=a)}),e}(n,i)||a;!function(t,e){for(var n,a=r(o[t]||[]);!(n=a()).done;)(0,n.value)({name:t,value:e})}(t,{prop:a,path:t,oldValue:s,value:i})}return!0}}}(i));return s.on=a,s};
//# sourceMappingURL=tigerlily.modern.js.map
