var t,n,r=Object.prototype,e=Function.prototype.toString,o=r.hasOwnProperty,a=e.call(Object),i=r.toString,c=(t=Object.getPrototypeOf,n=Object,function(r){return t(n(r))});function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function l(t,n){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return u(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,void 0):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function f(){this.callbacksLookup={}}f.prototype={emit:function(t,n){for(var r,e=this.callbacksLookup["*"]||[],o=l(this.callbacksLookup[t]||[]);!(r=o()).done;)(0,r.value)({name:t,value:n});for(var a,i=l(e);!(a=i()).done;)(0,a.value)({name:t,value:n})},on:function(t,n){for(var r,e=l(Array.isArray(t)?t:[t]);!(r=e()).done;){var o=r.value;this.callbacksLookup[o]||(this.callbacksLookup[o]=[]),this.callbacksLookup[o].push(n)}}};const s=new f;function p(t,n={}){t=t||"tigerlily";const{defaults:r={}}=n;let u=JSON.parse(localStorage.getItem(t)||"{}",v);return u=Object.assign(r,u),new Proxy(u,function n(r){return{get:(t,e)=>y(t[e])?new Proxy(t[e],n(r)):t[e],set(n,u,l){n[u]=l,localStorage.setItem(t,JSON.stringify(r,b));let f=n[u],p=y(f)?JSON.parse(JSON.stringify(f,b),v):f,g=y(l)?JSON.parse(JSON.stringify(l,b),v):l,m=function(t,n){if(t===n)return"";let r="";return function t(n,r,u){u=u||"",Array.isArray(n)?function(n,r,e){n.forEach((n,o,a)=>{const i=`${e}[${o}]`;r.call(a,n,o,a,i),t(a[o],r,i)})}(n,r,u):function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||"[object Object]"!=i.call(t)||function(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}(t))return!1;var n=c(t);if(null===n)return!0;var r=o.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&e.call(r)==a}(n)&&function(n,r,e){for(const o in n){const a=e?`${e}.${o}`:o;r.call(n,n[o],o,n,a),t(n[o],r,a)}}(n,r,u)}(t,(t,e,o,a)=>{t===n&&(r=a)}),r}(r,l)||u;return s.emit(m,{prop:u,path:m,oldValue:p,value:g}),!0}}}(u))}function y(t){return"object"==typeof t&&null!==t&&!(t instanceof Date)}function b(t,n){if(this[t]instanceof Date){let n=this[t].getTime();return n?{__isDate:!0,ms:n}:void 0}return n}function v(t,n){return n.__isDate?new Date(n.ms):n}p.on=function(t,n){s.on(t,function(t){n(t.value)})};export default p;
//# sourceMappingURL=tigerlily.modern.js.map
