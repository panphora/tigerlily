var t,r,n=Object.prototype,o=Function.prototype.toString,e=n.hasOwnProperty,a=o.call(Object),i=n.toString,c=(t=Object.getPrototypeOf,r=Object,function(n){return t(r(n))});function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=t[n];return o}function l(t,r){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,r){if(t){if("string"==typeof t)return u(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,void 0):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function f(){this.callbacksLookup={}}f.prototype={emit:function(t,r){for(var n,o=this.callbacksLookup["*"]||[],e=l(this.callbacksLookup[t]||[]);!(n=e()).done;)(0,n.value)({name:t,value:r});for(var a,i=l(o);!(a=i()).done;)(0,a.value)({name:t,value:r})},on:function(t,r){for(var n,o=l(Array.isArray(t)?t:[t]);!(n=o()).done;){var e=n.value;this.callbacksLookup[e]||(this.callbacksLookup[e]=[]),this.callbacksLookup[e].push(r)}}};var s=new f;function p(t,r){void 0===r&&(r={}),t=t||"tigerlily";var n=r.defaults,u=void 0===n?{}:n,l=JSON.parse(localStorage.getItem(t)||"{}");return l=Object.assign(u,l),new Proxy(l,function r(n){return{get:function(t,o){return y(t[o])?new Proxy(t[o],r(n)):t[o]},set:function(r,u,l){var f=r[u],p=y(f)?JSON.parse(JSON.stringify(f)):f,v=y(l)?JSON.parse(JSON.stringify(l)):l;r[u]=l,localStorage.setItem(t,JSON.stringify(n));var b=function(t,r){if(t===r)return"";var n="";return function t(r,n,u){u=u||"",Array.isArray(r)?function(r,n,o){r.forEach((r,e,a)=>{const i=`${o}[${e}]`;n.call(a,r,e,a,i),t(a[e],n,i)})}(r,n,u):function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||"[object Object]"!=i.call(t)||function(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(t){}return r}(t))return!1;var r=c(t);if(null===r)return!0;var n=e.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&o.call(n)==a}(r)&&function(r,n,o){for(const e in r){const a=o?`${o}.${e}`:e;n.call(r,r[e],e,r,a),t(r[e],n,a)}}(r,n,u)}(t,function(t,o,e,a){t===r&&(n=a)}),n}(n,l)||u;return s.emit(b,{prop:u,path:b,oldValue:p,value:v}),!0}}}(l))}function y(t){return"object"==typeof t&&null!==t}p.on=function(t,r){s.on(t,function(t){r(t.value)})};export default p;
//# sourceMappingURL=tigerlily.module.js.map
