!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).tigerlily=n()}(this,function(){var t,n,e=Object.prototype,r=Function.prototype.toString,o=e.hasOwnProperty,i=r.call(Object),a=e.toString,u=(t=Object.getPrototypeOf,n=Object,function(e){return t(n(e))});function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function l(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return c(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,void 0):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}function f(){this.callbacksLookup={}}f.prototype={emit:function(t,n){for(var e,r=this.callbacksLookup["*"]||[],o=l(this.callbacksLookup[t]||[]);!(e=o()).done;)(0,e.value)({name:t,value:n});for(var i,a=l(r);!(i=a()).done;)(0,i.value)({name:t,value:n})},on:function(t,n){for(var e,r=l(Array.isArray(t)?t:[t]);!(e=r()).done;){var o=e.value;this.callbacksLookup[o]||(this.callbacksLookup[o]=[]),this.callbacksLookup[o].push(n)}}};var s=new f;function p(t,n){void 0===n&&(n={}),t=t||"tigerlily";var e=n.defaults,c=void 0===e?{}:e,l=JSON.parse(localStorage.getItem(t)||"{}",b);return l=Object.assign(c,l),new Proxy(l,function n(e){return{get:function(t,r){return y(t[r])?new Proxy(t[r],n(e)):t[r]},set:function(n,c,l){n[c]=l,localStorage.setItem(t,JSON.stringify(e,v));var f=n[c],p=y(f)?JSON.parse(JSON.stringify(f,v),b):f,d=y(l)?JSON.parse(JSON.stringify(l,v),b):l,m=function(t,n){if(t===n)return"";var e="";return function t(n,e,c){c=c||"",Array.isArray(n)?function(n,e,r){n.forEach((n,o,i)=>{const a=`${r}[${o}]`;e.call(i,n,o,i,a),t(i[o],e,a)})}(n,e,c):function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||"[object Object]"!=a.call(t)||function(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}(t))return!1;var n=u(t);if(null===n)return!0;var e=o.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&r.call(e)==i}(n)&&function(n,e,r){for(const o in n){const i=r?`${r}.${o}`:o;e.call(n,n[o],o,n,i),t(n[o],e,i)}}(n,e,c)}(t,function(t,r,o,i){t===n&&(e=i)}),e}(e,l)||c;return s.emit(m,{prop:c,path:m,oldValue:p,value:d}),!0}}}(l))}function y(t){return"object"==typeof t&&null!==t&&!(t instanceof Date)}function v(t,n){if(this[t]instanceof Date){var e=this[t].getTime();return e?{__isDate:!0,ms:e}:void 0}return n}function b(t,n){return n.__isDate?new Date(n.ms):n}return p.on=function(t,n){s.on(t,function(t){n(t.value)})},p});
//# sourceMappingURL=tigerlily.umd.js.map
