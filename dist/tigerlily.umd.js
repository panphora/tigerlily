!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).tigerlily=n()}(this,function(){var t,n,r=Object.prototype,e=Function.prototype.toString,o=r.hasOwnProperty,i=e.call(Object),a=r.toString,c=(t=Object.getPrototypeOf,n=Object,function(r){return t(n(r))});function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function l(t,n){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return u(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,void 0):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function f(){this.callbacksLookup={}}f.prototype={emit:function(t,n){for(var r,e=this.callbacksLookup["*"]||[],o=l(this.callbacksLookup[t]||[]);!(r=o()).done;)(0,r.value)({name:t,value:n});for(var i,a=l(e);!(i=a()).done;)(0,i.value)({name:t,value:n})},on:function(t,n){for(var r,e=l(Array.isArray(t)?t:[t]);!(r=e()).done;){var o=r.value;this.callbacksLookup[o]||(this.callbacksLookup[o]=[]),this.callbacksLookup[o].push(n)}}};var s=new f;function y(t,n){void 0===n&&(n={}),t=t||"tigerlily";var r=n.defaults,u=void 0===r?{}:r,l=JSON.parse(localStorage.getItem(t)||"{}",b);return l=Object.assign(u,l),new Proxy(l,function n(r){return{get:function(t,e){return p(t[e])?new Proxy(t[e],n(r)):t[e]},set:function(n,u,l){n[u]=l,localStorage.setItem(t,JSON.stringify(r,v));var f=n[u],y=p(f)?JSON.parse(JSON.stringify(f,v),b):f,d=p(l)?JSON.parse(JSON.stringify(l,v),b):l,m=function(t,n){if(t===n)return"";var r="";return function t(n,r,u){u=u||"",Array.isArray(n)?function(n,r,e){n.forEach((n,o,i)=>{const a=`${e}[${o}]`;r.call(i,n,o,i,a),t(i[o],r,a)})}(n,r,u):function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||"[object Object]"!=a.call(t)||function(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}(t))return!1;var n=c(t);if(null===n)return!0;var r=o.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&e.call(r)==i}(n)&&function(n,r,e){for(const o in n){const i=e?`${e}.${o}`:o;r.call(n,n[o],o,n,i),t(n[o],r,i)}}(n,r,u)}(t,function(t,e,o,i){t===n&&(r=i)}),r}(r,l)||u;return s.emit(m,{prop:u,path:m,oldValue:y,value:d}),!0}}}(l))}function p(t){return Array.isArray(t)||"[object Object]"===Object.prototype.toString.call(t)}function v(t,n){if(this[t]instanceof Date){var r=this[t].getTime();return r?{__isDate:!0,ms:r}:void 0}return n}function b(t,n){return p(n)&&n.__isDate?new Date(n.ms):n}return y.on=function(t,n){s.on(t,function(t){n(t.value)})},y});
//# sourceMappingURL=tigerlily.umd.js.map
