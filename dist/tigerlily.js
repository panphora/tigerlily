var t,r,n=Object.prototype,e=Function.prototype.toString,o=n.hasOwnProperty,a=e.call(Object),i=n.toString,c=(t=Object.getPrototypeOf,r=Object,function(n){return t(r(n))});function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function l(t,r){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,r){if(t){if("string"==typeof t)return u(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,void 0):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function f(){this.callbacksLookup={}}f.prototype={emit:function(t,r){for(var n,e=this.callbacksLookup["*"]||[],o=l(this.callbacksLookup[t]||[]);!(n=o()).done;)(0,n.value)({name:t,value:r});for(var a,i=l(e);!(a=i()).done;)(0,a.value)({name:t,value:r})},on:function(t,r){for(var n,e=l(Array.isArray(t)?t:[t]);!(n=e()).done;){var o=n.value;this.callbacksLookup[o]||(this.callbacksLookup[o]=[]),this.callbacksLookup[o].push(r)}}};var s=new f;function y(t,r){void 0===r&&(r={}),t=t||"tigerlily";var n=r.defaults,u=void 0===n?{}:n,l=JSON.parse(localStorage.getItem(t)||"{}",b);return l=Object.assign(u,l),new Proxy(l,function r(n){return{get:function(t,e){return p(t[e])?new Proxy(t[e],r(n)):t[e]},set:function(r,u,l){r[u]=l,localStorage.setItem(t,JSON.stringify(n,v));var f=r[u],y=p(f)?JSON.parse(JSON.stringify(f,v),b):f,g=p(l)?JSON.parse(JSON.stringify(l,v),b):l,m=function(t,r){if(t===r)return"";var n="";return function t(r,n,u){u=u||"",Array.isArray(r)?function(r,n,e){r.forEach((r,o,a)=>{const i=`${e}[${o}]`;n.call(a,r,o,a,i),t(a[o],n,i)})}(r,n,u):function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||"[object Object]"!=i.call(t)||function(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(t){}return r}(t))return!1;var r=c(t);if(null===r)return!0;var n=o.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&e.call(n)==a}(r)&&function(r,n,e){for(const o in r){const a=e?`${e}.${o}`:o;n.call(r,r[o],o,r,a),t(r[o],n,a)}}(r,n,u)}(t,function(t,e,o,a){t===r&&(n=a)}),n}(n,l)||u;return s.emit(m,{prop:u,path:m,oldValue:y,value:g}),!0}}}(l))}function p(t){return Array.isArray(t)||"[object Object]"===Object.prototype.toString.call(t)}function v(t,r){if(this[t]instanceof Date){var n=this[t].getTime();return n?{__isDate:!0,ms:n}:void 0}return r}function b(t,r){return p(r)&&r.__isDate?new Date(r.ms):r}y.on=function(t,r){s.on(t,function(t){r(t.value)})},module.exports=y;
//# sourceMappingURL=tigerlily.js.map
